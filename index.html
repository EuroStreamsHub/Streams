<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Football Streams</title>
<style>
body {
  background:#121212;
  color:#f1faee;
  font-family:'Segoe UI',Roboto,sans-serif;
  margin:0;
  padding:1rem;
}
h2 {
  font-size:1.4rem;
  margin:1.5rem 0 1rem;
  font-weight:700;
  border-left:4px solid #e63946;
  padding-left:.5rem;
}
.grid {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:1rem;
}
.card {
  background:#1f1f1f;
  border-radius:1rem;
  overflow:hidden;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
  cursor:pointer;
  transition:transform .2s, box-shadow .2s;
}
.card:hover {
  transform:translateY(-4px);
  box-shadow:0 8px 20px rgba(0,0,0,0.5);
}
.poster {
  position:relative;
  aspect-ratio:16/9;
  background:#000;
}
.poster img {
  width:100%;
  height:100%;
  object-fit:cover;
}
.live-badge {
  position:absolute;
  bottom:8px;
  right:8px;
  background:#e63946;
  color:#fff;
  font-size:.8rem;
  font-weight:bold;
  padding:2px 6px;
  border-radius:4px;
}
.card-body {
  padding:.7rem;
}
.card-title {
  font-weight:700;
  font-size:1rem;
  margin:0 0 .4rem;
}
.card-time {
  color:#bbb;
  font-size:.9rem;
}
</style>
</head>
<body>

<div id="matches"></div>

<script>
const API_BASE="https://streamed.pk/api";
const matchesDiv=document.getElementById("matches");

fetch(`${API_BASE}/matches`)
  .then(res=>res.json())
  .then(data=>{
    const grouped={};
    data.forEach(m=>{
      const date=new Date(m.date).toLocaleDateString([], {weekday:'long', day:'numeric', month:'short'});
      if(!grouped[date]) grouped[date]=[];
      grouped[date].push(m);
    });

    for(const [date,matches] of Object.entries(grouped)){
      const h2=document.createElement("h2");
      h2.textContent=date;
      matchesDiv.appendChild(h2);

      const grid=document.createElement("div");
      grid.className="grid";

      matches.forEach(m=>{
        const card=document.createElement("div");
        card.className="card";
        card.onclick=()=>location.href=`viewer.html?match=${encodeURIComponent(JSON.stringify(m))}`;

        const poster=document.createElement("div");
        poster.className="poster";
        const img=document.createElement("img");
        img.src=m.poster ? `https://streamed.pk${m.poster}` : "https://via.placeholder.com/480x270?text=No+Poster";
        img.onerror=()=>{img.src="https://via.placeholder.com/480x270?text=No+Poster";};
        poster.appendChild(img);

        if(m.live){
          const badge=document.createElement("div");
          badge.className="live-badge";
          badge.textContent="LIVE";
          poster.appendChild(badge);
        }

        const body=document.createElement("div");
        body.className="card-body";

        const title=document.createElement("div");
        title.className="card-title";
        title.textContent=m.title || (m.teams?.home?.name + " vs " + m.teams?.away?.name);

        const time=document.createElement("div");
        time.className="card-time";
        time.textContent=m.date ? new Date(m.date).toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'}) : "TBD";

        body.appendChild(title);
        body.appendChild(time);

        card.appendChild(poster);
        card.appendChild(body);
        grid.appendChild(card);
      });

      matchesDiv.appendChild(grid);
    }
  })
  .catch(console.error);
</script>

</body>
</html>
