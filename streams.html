<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Football Streams</title>

<style>
body {
  background:#369991;
  font-family:'Segoe UI',Roboto,sans-serif;
  margin:0;
  color:#000;
}
.controls {
  text-align:center;
  padding:1rem;
}
.button {
  background:#1f1f1f;
  color:#f1faee;
  border:none;
  padding:.6rem 1rem;
  margin:.2rem;
  border-radius:.5rem;
  font-weight:600;
  cursor:pointer;
}
.button.active {
  background:#FF6700;
}
.match-date {
  font-weight:bold;
  margin:1rem;
}
.match-card {
  background:#d3d3d3;
  margin:.5rem 1rem;
  padding:.8rem;
  border-radius:.5rem;
  text-decoration:none;
  color:#000;
  display:block;
}
.match-title { font-weight:bold; }
.match-time { font-size:.9rem; }
</style>
</head>

<body>

<div class="controls">
  <button class="button" id="liveBtn">Live</button>
  <button class="button" id="soonBtn">Starting Soon</button>
  <button class="button" id="popularBtn">Popular</button>
</div>

<div id="matches"></div>

<script>
const matchesDiv = document.getElementById("matches");
const liveBtn = document.getElementById("liveBtn");
const soonBtn = document.getElementById("soonBtn");
const popularBtn = document.getElementById("popularBtn");

let allMatches = [];

function clearButtons() {
  [liveBtn, soonBtn, popularBtn].forEach(b => b.classList.remove("active"));
}

async function fetchMatches(type="default") {
  let url = "https://streamed.pk/api/matches/football";

  if (type === "popular") url += "/popular";
  if (type === "live") url = "https://streamed.pk/api/matches/live";

  const res = await fetch(url);
  const data = await res.json();

  allMatches = data.filter(m => m.category === "football");
  render();
}

function render() {
  matchesDiv.innerHTML = "";
  let list = [...allMatches];
  const now = Date.now();

  if (soonBtn.classList.contains("active")) {
    list = list.filter(m =>
      m.date > now && m.date - now <= 30 * 60 * 1000
    );
  }

  const groups = {};
  list.forEach(m => {
    const d = new Date(m.date).toDateString();
    groups[d] = groups[d] || [];
    groups[d].push(m);
  });

  for (const day in groups) {
    const date = document.createElement("div");
    date.className = "match-date";
    date.textContent = day;
    matchesDiv.appendChild(date);

    groups[day].forEach(m => {
      const s = m.sources[0];
      const a = document.createElement("a");
      a.className = "match-card";
      a.href =
        `viewer.html?source=${s.source}&id=${s.id}&title=${encodeURIComponent(m.title)}`;
      a.innerHTML = `
        <div class="match-title">${m.title}</div>
        <div class="match-time">${new Date(m.date).toLocaleTimeString()}</div>
      `;
      matchesDiv.appendChild(a);
    });
  }
}

liveBtn.onclick = () => {
  clearButtons();
  liveBtn.classList.add("active");
  fetchMatches("live");
};

popularBtn.onclick = () => {
  clearButtons();
  popularBtn.classList.add("active");
  fetchMatches("popular");
};

soonBtn.onclick = () => {
  clearButtons();
  soonBtn.classList.add("active");
  fetchMatches();
};

fetchMatches();
</script>

</body>
</html>
