<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Streams | Source 2</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* SAME STYLES AS streams.html */
</style>
</head>

<body>

<header>
  <div class="logo" onclick="location.href='index.html'">SPORT HUB</div>
  <div class="search"><input id="search" placeholder="Search teams"></div>

  <div class="source-switch">
    <a href="streams.html">Source 1</a>
    <a href="streams2.html" class="active">Source 2</a>
  </div>
</header>

<div class="filters">
  <button class="filter-btn" onclick="setMode('live',this)">Live</button>
  <button class="filter-btn" onclick="setMode('soon',this)">Soon</button>
</div>

<div class="grid" id="grid">Loadingâ€¦</div>

<script>
let matches=[], mode="all";
const NOW=()=>Date.now();

async function load(){
  const r=await fetch("https://streamed.pk/api/matches/all");
  matches=await r.json();
  render();
}
function setMode(m,el){
  document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
  if(mode===m){mode="all";return render();}
  el.classList.add('active');mode=m;render();
}
function render(){
  const q=document.getElementById("search").value.toLowerCase();
  let out=matches.filter(m=>m.title.toLowerCase().includes(q));
  out=out.filter(m=>{
    const t=m.date;
    const live=NOW()>=t-5*60e3 && NOW()<=t+2*3600e3;
    const soon=t>NOW() && t<=NOW()+3600e3;
    if(mode==="live") return live;
    if(mode==="soon") return soon;
    return true;
  });
  const g=document.getElementById("grid");
  g.innerHTML="";
  out.forEach(m=>{
    const live=NOW()>=m.date-5*60e3 && NOW()<=m.date+2*3600e3;
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`<b>${m.title}</b><br>${live?'<span class="live">LIVE</span>':''}`;
    c.onclick=()=>{
      location.href=`streamviewer2.html?id=${m.id}&title=${encodeURIComponent(m.title)}`;
    };
    g.appendChild(c);
  });
}
document.getElementById("search").oninput=render;
load();
</script>
</body>
</html>
