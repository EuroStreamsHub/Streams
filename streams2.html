<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Streams</title>

<style>
body {
  margin:0;
  background:#0f1014;
  color:white;
  font-family:system-ui,sans-serif;
}

header {
  position:fixed;
  top:0; left:0; right:0;
  height:70px;
  background:#0f1014;
  border-bottom:1px solid #2a2d35;
  display:flex;
  align-items:center;
  padding:0 4%;
  z-index:1000;
}

h1 { color:#0072db; font-size:1.4rem; }

main {
  padding:90px 4% 4rem;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
  gap:1.2rem;
}

.card {
  background:#1a1c22;
  border:1px solid #2a2d35;
  border-radius:12px;
  padding:1.2rem;
  cursor:pointer;
  transition:.2s;
}

.card:hover {
  border-color:#0072db;
  transform:translateY(-3px);
}

.title {
  font-weight:800;
  margin-bottom:.6rem;
}

.meta {
  display:flex;
  justify-content:space-between;
  font-size:.8rem;
  color:#9ca3af;
}
</style>
</head>

<body>

<header>
  <h1>SPORT STREAMS</h1>
</header>

<main id="grid">
  <div>Loadingâ€¦</div>
</main>

<script>
const API = "https://streamed.pk/api";
const grid = document.getElementById("grid");

async function loadMatches() {
  const res = await fetch(`${API}/matches/all`);
  const matches = await res.json();

  grid.innerHTML = "";

  matches.forEach(m => {
    if (!m.sources || !m.sources.length) return;

    const card = document.createElement("div");
    card.className = "card";

    const time = new Date(m.date).toLocaleString([], {
      hour:"2-digit", minute:"2-digit", month:"short", day:"numeric"
    });

    card.innerHTML = `
      <div class="title">${m.title}</div>
      <div class="meta">
        <span>${m.category.toUpperCase()}</span>
        <span>${time}</span>
      </div>
    `;

    card.onclick = () => {
      location.href =
        `streamviewer2.html?title=${encodeURIComponent(m.title)}&sources=${encodeURIComponent(JSON.stringify(m.sources))}`;
    };

    grid.appendChild(card);
  });
}

loadMatches();
</script>

</body>
</html>
